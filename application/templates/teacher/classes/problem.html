{% extends "templates/bulma_template.html" %}


{% block head %}

    <link rel="stylesheet" href="{{ url_for('static', filename='css/admin/main.css') }}">



{% endblock %}

{% block content %}

    {% include "teacher/templates/class_navbar.html" %}


    <div class="tabs is-centered is-fullwidth is-toggle is-large">
        <ul>
            <li id="problem-info-button" class="is-active"><a onclick="toggle_problem_view(this, 'student-submissions', 'problem-info')">Problem Info</a></li>
            <li id="student-submissions-button"><a onclick="toggle_problem_view(this, 'problem-info', 'student-submissions')">Student Submissions</a></li>
        </ul>
    </div>

    <section class="section" id="problem-info">

        <div class="container">

            <div class="box mb-6">Send this link to your students: <a
                    href="{{ url_for('student_submit_problem', class_identifier=class_.identifier, problem_identifier=problem.identifier) }}">Here</a>
            </div>

            <div class="columns">
                <div class="column is-10">
                    <h2 class="title is-2">{{ problem.title }}</h2>
                    <p class="mb-6">{{ problem.description }}</p>

                    <h3 class="title is-3">Inputs and Outputs</h3>

                    <div class="columns">
                        <div class="column is-narrow">
                            {% for i in range(input_presigned_urls|length) %}
                                <p><a target="_blank" href="{{ input_presigned_urls[i] }}">Input {{ i }}</a></p>
                            {% endfor %}
                        </div>
                        <div class="column is-narrow">
                            {% for i in range(output_presigned_urls|length) %}
                                <p><a target="_blank" href="{{ output_presigned_urls[i] }}">Output {{ i }}</a></p>
                            {% endfor %}
                        </div>
                    </div>

                </div>
                <div class="column has-background-white">
                    <h4 class="title is-4">Specifications</h4>
                    <p><b>Time limit</b>: {{ problem.time_limit }} seconds</p>
                    <br>
                    <p><b>Memory limit</b>: {{ problem.memory_limit }} MB</p>
                    <br>
                    <p>Worth {{ problem.total_marks }} points</p>
                    <br>
                    <p><b>Languages allowed</b>:</p>
                    {% for l in problem.languages %}
                        <p>{{ l.name }}</p>
                    {% endfor %}
                    <br>
                    <p><b>Allow multiple submissions</b>: {{ problem.allow_multiple_submissions }}</p>
                    <br>
                    <p><b>Auto grade</b>: {{ problem.auto_grade }}</p>
                    <br>
                    <p><b>Created at</b>: {{ problem.create_date_time.strftime('%A, %B %d, %I:%M %p %z') }}</p>
                    <br>
                    <p><b>Creator</b>: {{ problem.user.name }} ({{ problem.user.email }})</p>
                </div>
            </div>


        </div>

    </section>


    <section class="section dontshow" id="student-submissions">

        <div class="container">


            <h2 class="title is-2">Student Submissions</h2>


        </div>

    </section>



    <script src="{{ url_for('static', filename='js/main.js') }}"></script>

    <script>
    function toggle_problem_view(elem, to_remove, to_add) {
        elem.parentElement.classList.add('is-active')
        document.getElementById(`${to_remove}-button`).classList.remove('is-active')
        document.getElementById(to_remove).classList.add('dontshow')
        document.getElementById(to_add).classList.remove('dontshow')

    }
    </script>

{% endblock %}